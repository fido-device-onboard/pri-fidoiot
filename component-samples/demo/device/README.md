# Getting the Executable

Use the following commands to build FIDO Device Onboard (FDO) Protocol Reference Implementation (PRI) HTTP Device Component sample source.
For the instructions in this document, `<fdo-pri-src>` refers to the path of the FDO PRI folder 'pri-fidoiot'.
```
$ cd <fdo-pri-src>/component-samples/http-device-sample/
$ mvn clean install
```

This will copy the required executables and libraries into <fdo-pri-src>/component-samples/demo/device/.

### Configuring the Device Service

All the runtime configurations for the device is specified in `service.yml` file.

`service.yml` file is structured into multiple sections:

- `device:` -  This section contains the device specific runtime configurations including di-url, credential-file, key-type, key-enc, etc.
     

- `system-properties:` - This section contains the runtime environment variables.


- `workers:` The section contains the configuration to select desired functionality for the device. The deployer can pick and choose the functionality during runtime.


# Starting the Device Service

```
$ cd <fdo-pri-src>/component-samples/demo/device
$ java -jar device.jar
```

The `device.p12` must contain the following data:
- The device's private key
- The device's public key or certificate (PKCS12 format).

PS: If `device.p12` file is not present, then the file is autogenerated during runtime. 

The device will initialize and exit.  A `credentials.bin` file will be created containing the device state.
Removing this file will make the device re-initialize the next time it runs.

The initialization (manufacturer) server must be available during this step.

```
$ java -jar device.jar
```

The device will be onboarded.

The rendezvous and owner servers must be available during this step.

# Configuring AIO for HTTPS/TLS Communication

By default, the AIO uses HTTP for all communications on port 8080. In addition to that, the AIO can be configured to handle HTTPS requests from the device.

AIO can generate its own certificate and if you want to override the default certificate, follow these steps:

- Generate the Keystore/Certificate for the AIO. [REFER](https://docs.oracle.com/cd/E19509-01/820-3503/6nf1il6er/index.html)

    * Ensure that the web certificate is issued to the resolvable domain of the AIO server.

- Copy the generated Keystore/Certificate to `.app-data` folder and update credentials in `service.yml` file.

- Update the SSL keystore password & subject_names in `service.yml` file.





